"use strict";angular.module("lx.form",["lx.cache"]).factory("lxForm",["lxCache",function(a){return function(b,c){var d={},e={};return d.model={},d.isDirty=!1,d.isNew=function(){return d.isDirty&&!(d.model[c]||d.model._id)},d.resetForm=function(a){a&&(d.resetValidation(a),a.$setPristine(),a.$setUntouched())},d.reset=function(f){d.resetForm(f),d.model=angular.copy(e),c&&(d.model[c]?a[d.model[c]]=d.model:a[b]=d.model)},d.isUnchanged=function(){return angular.equals(d.model,e)},d.hasLoadedModelFromCache=function(c){return c&&a[c]?(d.model=a[c],a[c+"_Master"]&&(e=a[c+"_Master"]),d.isDirty=!0,!0):c?!1:(a[b]?d.model=a[b]:a[b]=d.model,d.isDirty=!0,!0)},d.setModel=function(f,g,h){angular.isObject(f)&&(d.resetForm(h),!d.model[c]&&g&&delete a[b],d.model=f,e=angular.copy(f),g?(delete a[f[c]],delete a[f[c]+"_Master"]):void 0!==f[c]?(a[f[c]]=d.model,a[f[c]+"_Master"]=e):a[b]=d.model,d.isDirty=!0)},d.populateServerValidation=function(a,b){b&&(d.resetServerErrors(a),angular.forEach(b,function(b){if(b.property){var c=b.property.toLowerCase();a[c]&&(a[c].$setValidity("server",!1),a[c].$error.serverMsg=b.message,a[c].$error.expected=b.expected)}}))},d.resetServerErrors=function(a){angular.forEach(a,function(a){a&&a.$error&&a.$error.serverMsg&&(a.$setValidity("server",!0),delete a.$error.serverMsg,delete a.$error.expected)})},d.resetValidation=function(a){angular.forEach(a,function(a,b){b&&"$"!==b[0]&&(angular.forEach(a.$error,function(b,c){a.$setValidity(c,!0),a.$setViewValue("")}),a.$setPristine())})},d}}]);
//# sourceMappingURL=lx_form.min.js.map